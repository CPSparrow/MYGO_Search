# **MYGO!!!!!** search

## 介绍

### 这个项目是干什么的？

这个项目实现了一个简单的图片搜索系统，可以根据关键词搜索 **MYGO!!!!!** 中的图片。\
最初的灵感来自有人说可以让vv老师和 **MYGO!!!!!** 领域大神只用截图对话，所以我就想着要实现一个自动检索系统来着，帮助不是很熟悉动画的人进行查找。虽然说功能上和我预想的还是差了很多，性能也不算优越。但毕竟足够好玩，还是值得分享一下。\
[示例搜索：为什么](assets\pic1.png)\
[示例搜索：为什么要演奏](assets\pic2.png)

### 如何运行这些代码？

0. 考虑到版权问题，我只上传了处理脚本和网页文件。假如你手头也有带字幕的视频，应该也可以运行一样的代码。
1. 运行```video&str2pic.py```文件，可以自动截图并且按照集数归类到文件夹里，格式为```jpg_XX```,而每一个目录内会按照截图在原视频出现的顺序编号，格式为```XXX.jpg```并且生成对应的```index.csv```文件作为索引。
2. 运行```backend.py```,flask服务器会自动运行在```http://localhost:5000```作为后端。随后就可以在浏览器里打开```index.html```进行搜索。

> 关于要准备的源文件，默认同目录下有从01.mp4编号到13.mp4的视频文件以及对应的srt字幕文件，即命名为s01.srt到s13.srt\
> 可以参照[运行代码前的截图](assets\pic3.png)

## 如果我的视频没有内嵌srt文件怎么办

的确，并不是所有的视频都可以提取srt或者其他的字幕文件，就和我的源文件一样。我的解决办法是使用[望言OCR](https://github.com/nhjydywd/SubtitleOCR)识别视频里的字幕。

## 环境配置和一点碎碎念

1. 如果只运行后端代码，即```backend.py```，python环境只要装好```flask,flask_cors,pandas,fuzzywuzzy```这四个包就行了。当然，根据[知乎上的文章](https://zhuanlan.zhihu.com/p/285175930),安装```python-Levenshtein```库可以加快模糊匹配的速度。
2. 如果要运行```video&str2pic.py```，还需要安装```pysrt```和```moviepy```。这里的代码可以根据srt文件自动从视频文件里截图并且保存。可惜的是运行效率算不上太高，我跑 **MYGO!!!!!** 总共13集用了15分钟左右。DeepSeek给我写了一个据说是优化过的的版本，但是似乎在我的设备(i5-12400F)上差别不大。
3. 太豪了，已经熬夜到第二天了。再过一天还有 **Ave Mujica** 捏。
